<html>

    
    
   
    
    
<head>
    <script src="jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
    <style>

    </style>
</head>

<body>
 
    <script>
        
        
     
        var SDK = lpTag.agentSDK;
        var convID = "";
        SDK.init();
        
        var onSuccess1 = function(data) {
            convID = data;
        };
        var onError1 = function(data) {
            convID = null;
        };
        
        
        function pushData(myData) {
		    var xhr = new XMLHttpRequest();
        	    xhr.addEventListener("readystatechange", function () {
          		    if (this.readyState === 4) {
				    // var jsonResult = JSON.parse(this.responseText);
				    console.log(xhr.response);
				    if (xhr.response === "error"){
                        console.log("success");

				    } else{
                        console.log("error");
				    }
                        

          		}	
        	});
        	var URLforGET = "https://marcowabot.herokuapp.com/add?data=" + myData;
		    console.log(URLforGET);
		    xhr.open("GET", URLforGET);
        	xhr.send();
		
	    }	
        
        
      
        var updateCallback = function(data) {
            
            console.log("data --> " + JSON.stringify(data.newValue));
            pushData(myData)
            
        };
        
        
        var notifyWhenDone = function(err) {
            if (err) {
                // Do something with the error
            }
            // called when the bind is completed successfully,
            // or when the action terminated with an error
        };
     
        var pathToData = "chatTranscript";
       
        SDK.bind(pathToData, updateCallback, notifyWhenDone);
        SDK.get('chatInfo.rtSessionId', onSuccess1, onError1);
      
      
       
    </script>
</body>

</html>
