<html>

    
    
    
<head>
    <script src="jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
    <style>

    </style>
</head>

<body>
 
    <script>
        
        
     
        var SDK = lpTag.agentSDK;
        var convID = "";
        SDK.init();
        
        var onSuccess1 = function(data) {
            convID = data;
        };
        var onError1 = function(data) {
            convID = null;
        };
        
      
        var updateCallback = function(data) {
            
            console.log("data --> " + JSON.stringify(data.newValue));
            
            var chatLine = data.newValue.lines[0].text.replace(/(<p[^>]*>|<\/p>)/g, "");
           
            if (data.newValue.lines[0].source == 'visitor') {           
                console.log("visitor --> " + convID)
            } else{
                console.log("agent --> " + convID);
            }
            
        };
        
        
        var notifyWhenDone = function(err) {
            if (err) {
                // Do something with the error
            }
            // called when the bind is completed successfully,
            // or when the action terminated with an error
        };
     
        var pathToData = "chatTranscript";
       
        SDK.bind(pathToData, updateCallback, notifyWhenDone);
        SDK.get('chatInfo.rtSessionId', onSuccess1, onError1);
      
      
       
    </script>
</body>

</html>
